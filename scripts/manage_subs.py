
map_table = {}

map_table["wip_warn"] = """
::: {.callout-warning}
**THIS BOOK IS A WORK IN PROGRESS. IT IS INCOMPLETE AND MAY HAVE TYPOGRAPHICAL AND OTHER ERRORS.
IT IS NOT YET READY TO BE STUDIED FROM.**
:::
"""

# symbols
map_table["x"] = "✗"
map_table["v"] = "✓"
map_table["rarr"] = "→"
map_table["larr"] = "←"

# text terms
map_table["Allah"] = "Allāh"
map_table["3amr"] = "[#eamr]{.trn2}"
map_table["arch"] = "archetypal"
map_table["archly"] = "archetypically"
map_table["ia"] = "if Allāh wills"
map_table["quran"] = "Qurʾān"
map_table["hadith"] = "[HadIv]{.trn2}"
map_table["Hadith"] = "[#HadIv]{.trn2}"
map_table["islam"] = "[#islAm]{.trn2}"
map_table["ayah"] = "[Ayah]{.trn2}"
map_table["surah"] = "[sUrah]{.trn2}"
map_table["tafsir"] = "[tafsIr]{.trn2}"
map_table["sca"] = "[sca]{.smallcaps}"
map_table["msa"] = "[msa]{.smallcaps}"
map_table["ah"] = "[ah]{.smallcaps}"

map_table["samaa3"] = "attested usage"
map_table["qiyaas"] = "analogy"
map_table["3illah"] = "grammatical reason" #"theoretical cause"
map_table["ta3leel"] = "grammatical reasoning" #"theoretical cause"
map_table["shaadh"] = "anomalous usage"
map_table["taqdir"] = "virtual model" # "theoretical model" imaginary utterance, virtual, implication
map_table["taqdiring"] = "virtual modeling" # "theoretical model" imaginary utterance, virtual, implication
map_table["qaddar"] = "virtually model"
map_table["qaddars"] = "virtually models"
map_table["qaddaring"] = "virtually modeling"
map_table["qaddared"] = "virtually modeled"
map_table["kufan"] = "[#kUf]{.trn2}an"
map_table["basran"] = "[#baSr]{.trn2}an"


# inna and its sisters
map_table["lan"] = "[لَنْ]{.ar}"
map_table["lam"] = "[لَمْ]{.ar}"
map_table["laa"] = "[لَا]{.ar}"
map_table["idhan"] = "[إِذَنْ]{.ar}"
map_table["hatta"] = "[حَتَّى]{.ar}"
map_table["kay"] = "[كَيْ]{.ar}"
map_table["inna"] = "[إِنَّ]{.ar}"
map_table["anna"] = "[أَنَّ]{.ar}"
map_table["ka_anna"] = "[كَأَنَّ]{.ar}"
map_table["lakinna"] = "[لَـٰكِنَّ]{.ar}"
map_table["layta"]   = "[لَيْتَ]{.ar}"
map_table["la3alla"] = "[لَعَلَّ]{.ar}"
map_table["in"] = "[إِنْ]{.ar}"
map_table["an"] = "[أَنْ]{.ar}"
map_table["ka_an"] = "[كَأَنْ]{.ar}"
map_table["lakin"] = "[لَـٰكِنْ]{.ar}"
map_table["in_nfy"] = "negating-[إِنْ]{.ar}"
map_table["idha"] = "[إِذَا]{.ar}"
map_table["idh"] = "[إِذْ]{.ar}"
map_table["law"] = "[لَوْ]{.ar}"
map_table["man"] = "[مَنْ]{.ar}"
map_table["maa"] = "[مَا]{.ar}"

map_table["_in"] = "إِنْ"
map_table["_idha"] = "إِذَا"
map_table["_lam"] = "لَمْ"
map_table["_laa"] = "لَا"
map_table["_maa"] = "مَا"
map_table["_lan"] = "لَنْ"

map_table["kaana"] = "[كَانَ]{.ar}"
map_table["laysa"] = "[لَيْسَ]{.ar}"

#map_table["qatala"] = "[qatala]{.trn}"
#map_table["yaqtul"] = "[yaqtul]{.trn}"
#map_table["yaqtulu"] = "[yaqtulu]{.trn}"
map_table["qatala"] = "[قَتَلَ]{.ar}"
map_table["yaqtul"] = "[يَقْتُلْ]{.ar}"
map_table["yaqtulu"] = "[يَقْتُلُ]{.ar}"
map_table["yaqtula"] = "[يَقْتُلَ]{.ar}"
map_table["_qatala"] = "قَتَلَ"
map_table["_yaqtul"] = "يَقْتُلْ"
map_table["_yaqtulu"] = "يَقْتُلُ"
map_table["_yaqtula"] = "يَقْتُلَ"

# 3aaqil
map_table["3aaqil"]   = "intelligent being"   # raised-state"
map_table["g_3aaqil"] = "non-intelligent being"  # propped-state

# states
map_table["ustate"] = "u-state"   # raised-state"
map_table["astate"] = "a-state"  # propped-state
map_table["istate"] = "i-state"  # lowered-state
map_table["0"] = "ø"  # clipped-state
map_table["0state"] = map_table["0"] + "-state"  # clipped-state

# diacritics
map_table["amark"] = "[fatHah]{.trn2}"
map_table["imark"] = "[kasrah]{.trn2}"
map_table["umark"] = "[Dammah]{.trn2}"
map_table["0mark"] = "[sukUn]{.trn2}"
map_table["shaddah"] = "[caddah]{.trn2}"
map_table["tanwin"] = "[tanwIn]{.trn2}"

# person
map_table["first"] = "speaker"
map_table["second"] = "adressee"
map_table["third"] = "absentee"
map_table["person"] = "participant"

# mabny and mutasarrif
map_table["mabny"] = "inflexible"
map_table["diptote"] = "semi-flexible"
map_table["triptote"] = "fully-flexible"
map_table["tote"] = "flexible"
map_table["ghair_mutasarrif"] = "rigid"
map_table["mutasarrif"] = "flexible"
map_table["mu3rab"] = "flexible"


# active and passive voice
map_table["active"] = "active" # "known-doer" verb?
map_table["passive"] = "passive" # "unknown-doer" verb?

# government
map_table["3aamil"] = "governor"
map_table["ma3mul"] = "governee"
map_table["3amal"] = "government"
map_table["3umdah"] = "indispensable" # indispensable, foundational, basic, load-bearing, structural
map_table["fadlah"] = "dispensable" # dispensable, redundant, extra

# jumlah khabariyyah and inshaa'iyyah
map_table["xabari"] = "truth-evaluable" # falsifiable
map_table["inshai"] = "non-truth-evaluable" # non-falsifiable

# idaafah types
map_table["ma3nawi"] = "real" 
map_table["lafzi"] = "superficial" # false, superficial


# alphabetical
map_table["3aaid"] = "refer-back pronoun"
map_table["3atf"] = "conjunction"
map_table["ma3toof"] = "post-conjunction"
map_table["ma3toof3"] = "pre-conjunction"
map_table["3atf_bayan"] = "clarifying follower"

map_table["adat_istifham"] = "question word"
map_table["af3al"] = "comparative noun"
map_table["af3aal_quloob"] = "verbs of perception"

map_table["badal"] = "sub" # replacement, substitute
map_table["mubdalb"] = "subbee" # replacee, substitutee

map_table["damir_fasl"] = "separating-pronoun"
map_table["damir_shan"] = "state-of-affairs pronoun" # pronoun-of-fact, pronoun of s͡haʾn
map_table["dharf"] = "adverb of time/place"
map_table["dharf_makan"] = "adverb of place"
map_table["dharf_zaman"] = "adverb of time"

map_table["faa3il"] = "doer"

map_table["hal"] = "[HAl]{.trn2}"

map_table["i3timaad"] = "governing support"
map_table["idaafah"] = "annexation"
map_table["idh_sudden"] = "[إِذَا]{.ar} or suddenness"
map_table["indir_mafulb"] = "indirect doee"
map_table["pregov"] = "foundational government" # initial gov, pre-gov, foundational gov
map_table["ism_fail"] = "doer participle"
map_table["ism_isharah"] = "pointing noun"
map_table["ism_of"] = "subject"
map_table["ism_maful"] = "doee participle"
map_table["ism_marrah"] = "one-time noun"
map_table["ism_hay2ah"] = "noun of manner" # style, form, guise, manner
map_table["ism_makan"] = "noun of place"
map_table["ism_mawsul"] = "connected noun"
map_table["ism_zaman"] = "noun of time"
map_table["isnaad_comp"] = "structurally complete"

map_table["jamid"] = "primitive"

map_table["j_sh"] = "conditional sentence"
map_table["shart"] = "condition" # condition
map_table["adat_shart"] = "conditional device"
map_table["jawab"] = "response"
map_table["jawab_shart"] = "condition-response" # outcome, result, consequence, condition-response, response-to-the-condition
map_table["fi3l_shart"] = "condition verb"
map_table["fi3l_jawab_shart"] = "condition-response verb"

map_table["j_ism"] = "nounal sentence"
map_table["j_f3l"] = "verbal sentence"

map_table["laam_ibt"] = "[لَ]{.ar} of beginning"
map_table["laam_frq"] = "differentiator [لَ]{.ar}"
map_table["laam_taqwiya"] = "strengthening-[لِ]{.ar}"
map_table["lazim"] = "intransitive"
map_table["lnj"] = {"لا النافية للجنس", "ar"}

map_table["madi"] = "stateless"  # perfect, perfective, "stateless" verb?
map_table["maful"] = "doee"
map_table["mafulb"] = "direct doee"
map_table["mafull"] = "adverb of reason"
map_table["mafulm"] = "accompanying doee"
map_table["mahall"] = "positional"
map_table["manut"] = "attributee"
map_table["masdar"] = "[maSdar]{.trn2}"
map_table["masdari_an"] = "[maSdari Ean]{.trn2}"
map_table["mmimi"] = "[mImi maSdar]{.trn2}"
map_table["msinai"] = "manufactured [maSdar]{.trn2}"
map_table["mmutlaq"] = "absolute doee"
map_table["mubtada"] = "subject"
map_table["mudaf"] = "annexe noun"
map_table["mudafil"] = "base noun"
map_table["mudarie"] = "stateful" # "[muDArie]{.trn2}" # "stateful", resembling, prefixed
map_table["mushar_il"] = "pointed-to noun" # "[muDArie]{.trn2}"
map_table["mushtaqq"] = "deverbal" # deverbal, derived
map_table["musnad"] = "structure-completer" # complement, leaning element
map_table["musnadi"] = "structure-starter" # rock, mainstay, anchor, pillar, supporting element
map_table["mustatir"] = "latent" # assumed, hidden, invisible, implied
map_table["muxaffaf"] = "lightened"
map_table["muxbar3"] = map_table["musnadi"] # theme,rock, mainstay, anchor, subject, keystone, cornerstone, post, mast, pillar
map_table["muxbar"] = map_table["musnad"] # rheme, complement, predicate, cornerstone, keystone, capstone, rafter, beam
map_table["mutaddi"] = "transitive"
map_table["mawsuf"] = "described noun"

map_table["naib"] = "deputy"
map_table["na3t"] = "attribute"
map_table["nidaa"] = "vocative"
map_table["naqis"] = "deficient"
map_table["nasix"] = "canceling"
map_table["nasibah"] = map_table["astate"] + "-izing"
map_table["noon_wiq"] = "guarding-[ن]{.ar}"

map_table["participle"] = "participle"
map_table["pbuh"] = "[ﷺ]{.aralt}"

map_table["rabt"] = "link"

map_table["sababi"] = "sababi" # takeover
map_table["sahib_hal"] = "person of ḥāl"
map_table["sahibs_hal"] = "persons of ḥāl"
map_table["sifah"] = "adjectival noun"
map_table["sifah_mush"] = "participle-like adjective" # {"participlish adjectival noun", nil} # "participle-like"?
map_table["sighah_mub"] = "emphatic noun" # {"participlish adjectival noun", nil} # "participle-like"?
map_table["silah"] = "connecting sentence"
map_table["shibh_fi3l"] = "quasi-verb"
map_table["shibh_jumlah"] = "quasi-sentence"
map_table["shibh_jumlah"] = "quasi-sentence"
map_table["subst"] = "entity noun"

map_table["taamm"] = "sufficient"
map_table["tabi3"] = "follower"
map_table["tafsiri"] = "explanatory"
map_table["tamyiz"] = "[tamyIz]{.trn2}"
map_table["tawkeed"] = "emphatic follower"

map_table["xabar"] = "info" # newsworthy expression, information, comment, remark, info, report, news, expression

map_table["ya_nida"] = "vocative [يَا]{.ar}"

map_table["zaaid"] = "redundant"
map_table["zaahir"] = "overt"

# crossovers
map_table["crossover"] = map_table["rarr"] #"⤮" # "⥇" #"×" + 
map_table["ism_masdar"] = map_table["subst"] + map_table["crossover"] + map_table["masdar"] #"maṣdar-like noun"
map_table["ism_failxsubst"] = map_table["ism_fail"] + map_table["crossover"] + map_table["subst"] #"maṣdar-like noun"
map_table["masdarxsubst"] = map_table["masdar"] + map_table["crossover"] + map_table["subst"]
map_table["masdarxsifah"] = map_table["masdar"] + map_table["crossover"] + map_table["sifah"]


def get_sub_text(match):
    global map_table
    key = match.group()
    #print(key)

    # remove # which indicates to capitalize first letter
    capitalize = False
    if key[0] == '#':
        assert(len(key) > 1)
        capitalize = True
        key = key[1:]

    # remove ";"s
    assert(len(key) > 2)
    key = key[1:-1]

    subbed_text = map_table[key] 
    if capitalize:
        subbed_text = subbed_text[0].upper() + subbed_text[1:] if len(subbed_text) > 1 else ""

    return subbed_text

